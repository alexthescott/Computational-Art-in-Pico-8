pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
-- bad ripple
-- alexthescott
-- 22/4/18

-- ty to @aebrer for this maths
rng = stat(6)
if rng == "" then
rng=tostr(rnd(-1)\1)..","..tostr(1+rnd(3)\1)..","..tostr(1+rnd(15)\1)..","..tostr(rnd())..","..tostr(rnd(15)\1)..","..tostr(rnd(15)\1)..","..tostr(rnd(5)\1)
end
rng_vals = {}
c_num = ""
for i=1,#rng do
 if sub(rng,i,i) != "," then
  c_num = c_num..sub(rng,i,i)
 else 
  add(rng_vals,tonum(c_num))
  c_num = ""
 end
end

-- 0,16384
srand(rng_vals[1])

-- bad weather map
p1={7,6,135,10,138,11,139,3,131,12,140,1,129,130,128,0}
-- bad heat
p2={7,135,10,9,15,143,142,137,14,136,8,2,130,133,128,0}
-- bad tropic
p3={7,15,143,142,14,8,136,137,9,10,135,138,11,139,12,140}

p={p1,p2,p3}
-- rnd in p
c=p[rng_vals[2]]
pal(c,1)

function forward()
	v=c[1]
	del(c,v)
	c[#c+1]=v
	pal(c,1)
end

-- palette step 1,15
for i=1,rnd(rng_vals[3]) do
	forward()
end

t=rng_vals[4]
f=0

v1=4+rng_vals[5]
v2=4+rng_vals[6]
vd=rng_vals[7]

cls(6)
_set_fps(60)
::♥::

for i=0,380 do
	x=rnd(128)\1
	y=rnd(128)\1
	s=4*sin(t/3)
	v=(sin(x/128)+
		cos(y/256)+
		cos(t/(x+y)/280)+
		sin(t+(x+y)/128)+
		sin(-t+s+sqrt((x/v1-16+v1)^2+(y/v2-16+v2)^2)))+
		sin(-t+s+sqrt(x*y+y*x)/8)
	pset(x,y,(6+v)/.75)
end

for d=0,32 do
	x=rnd(128)
	y=rnd(128)
	a=atan2((64-x)/128,(64-y)/128)
	x2=x-cos(a)
	y2=y-sin(a)
	if vd==0 then
		v=pget(x,y)
	elseif vd==1 then
		v=pget(x-1,y)
	elseif vd==2 then
		v=pget(x+1,y)
	elseif vd==3 then
		v=pget(x,y+1)
	elseif vd==4 then
		v=pget(x,y-1)
	end
	circ(x,y,1,v)
end

t+=0.001

if f>=128 then
	if f>=130 then
		f=0
	else
		srand(1)
	end
end


f+=1

flip()
goto ♥
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
77706076666777677076667700006000006000666606600060000676777666777600766607760077770776006700000006666006007766670767766660066777
70066677660776667066660700700607766006666000700066000776076760077000076667770677777676000760007006660006677776777677706666006770
00066677600707607666600667706677766000660006767767600676077600077000666666760677666660006066067000666066607666070777706666066770
00660676660777707066006666000707066600060006770077000676006660067606676066700667660666006770066000666666606666770670766667066600
00607776666707707000000660006777666000660066600767606666006600066660666666606666606676006700000000066766677666600666666607006600
00077766667776077666076660006770076000000006000077706660006600007670670000600667660777006770066000666666607066076666606667000000
00707666677766777660007660066600066700600006600777066760006700600770700000000077700677766700066060060766000066666666706677766070
00066666076766077600076660766600067706600007600767666666007770666707670000600066006660006600666666667700007006006660700607666000
60666670666667777060706667766000066000660066660076666666667700606000660000000666000600000607660060667776600060076666006607060000
66666006666667706000766660666076066000000066666776666660666000060006660060000060006660006606666666667777600006070660006000666000
07000070666666067600666676666006660000607066666670766600066770700066600066000666006660066660666060660706660066600600006607660000
00000777666066667700666006660006660006666666666667776670066770666706600066600666066600066606660000660766600076006660667000060000
76607676660066666006660066660000607066666666666677776667060000066000607066676660006660666000666006060667000006666766677700666006
66667700600666666606600066600000607066666660766667766600666000006606600066076660706666666000006000600667000600006667667000660006
66666000000667660667000066607606660666666660006600066077066000066000600060776660766677666777600700000666600660066677767666600006
66607000060666000666600006006666076666766600006600006777766770067000600666070666660007066676600700000006600606766667777700770000
00000000066660000666000066066666000660766600066600066070666706666606007060770666700000666677660606000076606666606667767000070006
00066070766600006700066666706660706607776677066000660666666606607760000666676767600070066676600006600777000766077600077770776000
70770777660600067060066666666607776607066000066070660666606706777776000666706607660670666006660777600770006660067606677777770007
77700070000600666000666066066677706060666070660700007706667776677766776666706000666000660706660767700670006600067666666776000006
76700000000077660066660000666770000000066770666770660700077766077000777667000600066070660706607666600676006600067006670000000066
00000000667777000666660000666770600000060077667707607000007766777000076607707770066776666666607666006666000000060000076006060066
00006667667000000666607006660706000006670006666700007600007770777667000600667777607766667766666666006660007060070000076007760666
67077777660000007766000006607060607766600006066666770000000070776666706077667000000006666666666670006760000000777006777077776666
67777777600000077766706070077066070006670066766667770007707700666767760677060770000700667066600660007770060000677000777777760067
00606076000606077060666770777660700000770007776666770007770607666677000770000770000006660006000666066770000000777706667066700007
00000006606070660066666777777067700067770007777067700000000067766077770770007700007006077066000766667770670000077007760066600077
00076666760000770006660077760007060667776007700007000000000077000077777770607066000066076666000660067766667670770000760777667777
07777776666007076666000760766070060066000006700077700766700677700070707776660706077766777666000660006666666606777007760677666777
77770066666677766666000666660670666060007077000077070760000067000770007760677066677760777760000060077606666007770077760677666777
76700006667077776660600666066660760770007770000667707667070600077770077760070066677007707666000600077000760007700777600077607766
77600000077767766666000660667066777700777770007777006660077670777700777770777006770006666660600600006606760067060077770777707666
76666706677766676666600067770666777777076770066777006660076660077707777777777000700677666606606000006666700060000777776677066666
77677770076666777066660077776667777707777700777700766607706700777777667777777000000007766000666000006667770660607777706760067760
76667760667660000666677707767677770060770007777000067077777000667006666777706607700777766000666000066667777666000766066606667760
60066600000660666660677700677777700666700007770007666077760007770707667077766007060070066006760000660677770767006760066760667606
00066666000666666076667606607777000666000007777006760007600777700007770077776000066070660066660006760777707777007770007770666666
00067766660766600777060666006700006666000077770666700777707777700000707777760700600776660006660067777777077776067600077777767666
00777766070060777770006676700000076600007677007667700667000777000707000777666770660006660066660667707777007770067600677776770066
77777666000007077066067777770700776000067777776667007067777677700770007770760006600706660076600666000777767770076600677666700006
67777700000000006666677777777077770007666677766670706000066667707777077700077000607066600776000666706777777770676606767007770000
00077000000066066660767760000777600006667007766677776770766677777670077600777066067060006666600760067767767606676600670007776000
00666606066666766077770006667677000000660077666707767000066007770600766667777666066667000706007060767666666007776000770007770066
66666666666667777000000067706660777606667006667066667000666007660660667677777766666677707700000007777666667077776606666067760676
66676666660777770006000677607000777667677766677666667076667007600007666007777667666667007000000070766607777667776667760667600677
60600006007707000066667777600007777607667066706667666766777706600076670007700077706607000000600677666666770667776676676666606777
00000000000000660666777777700066776607700767776677776666677770670767770077700007066677770000676607766666700067700777066677666666
70000006006600600677767777777006766700007777766767776666667766006666700077066070006077676000066667777066766677767777007770066660
66666666600660070760700000777776666660077777767677766666677760006667770070006760066077770007766077770007766667766777706600066666
07660606000007070000000007767667076606677777007777666667766600066677770000067776660007700077766060060077666677766077006666066660
06660000000070000000000766666777000706677776077777066666666660667777776000607776707066600667666700006777666776600660000666676606
00077007000000000000600677660700000776667700677760077766666707667700777776070766600006600667067770000776666777666666067666660660
06000000000006007006660777707066007777666677777777677776667007777007667766777666077770000660066770067777667777777666667667600000
66606066000000077766600070067607777777600667777776777766677700600006660067777660007770000000006676007777777776676760766006760006
66600060000000766666600000766006777777076660666067776007777706770066670777776666067770060660006660070700770766767666776006666066
07077007077777666766607070676666677700777766067077766777777667777666600077706067666760666700076666777600776666677066770007666606
77777777777777706066606060777707666000677600776777707777776760777666000077060666666600067700666666777606077666676666770066706066
70077707700707000776666066777776000776666607777770000777777770077660007770000766666000067676666007776660066676766666660660000066
60006766600006676666666667766760007777667007777700006677777707766700077766600706666006066777670077776666666777666666700066600066
00606766000066666666676077666076606766660077776000066666777706666707077666000000660600660077700607766666660777767676660660000660
00007776006666660060770770066776667666000077670006777660677776666077700066007660006667660777666077666666666777677777066666000000
77777777000076660000776670000677666060000700000007070006667776670667070000706606066676607777766677666676666776667777000600000000
67707777700000670000660000000777600006006660000007066007667677776700006000006660066706000777066777667776666766667770070660660667
60600000000000777677000067707760000066666006060066066000666777777660000000066660066777767777766776067766667666667700777700666077
66660700706777670770677067006000007066760006600660660006666776676660007707066060067770777777777770077776677760777600777700660000
60007777767676660076677766000000067666000066676600000070666706666660077700070070776077777670777706777706777666777770677700660700
77000607766776700076667600000000677000000667666660670700067706600006077770707766700077766067777000776666766666777777766660667706
77707070777777677776660000600666660000060666600676777000677776660700607776077666660777666066677607776676776667770777666666667706
00700000000777777600666006666666000700060666000777670007667766677077700777770666607777760066660667760777700667660077666666666066
07776607600000777000007666766667770066000060666676600077777776670077000000777660000777660676600677760677760006666677000006667666
06766677700600676060677766666007000000000006666060007777767767677770000000777660706777666776006077767777666776677676070060676660
66666667666707666767677666076000666600000000606000007670666666777770000007677607777670066777077777077777666766776776000660777667
06076777677777777776670066706666666660000000000066076760006667776770077776666700776660677777777700077777677666077777700666770007
00000067777777776670000000066666666600066006000066777600007677777600007777660066667000777670777760777760677766067770060666606006
00000607767666600060600000006666076006666000000676776000077777776660077066660666667007776606777677777706667660677000660066060067
67006666660000077666666660000666666666600000060770606607777677770600700666606066700777770007776707777777676666776000666700060666
66066666000000776666776600007776666666000000600000006677777007700000000666706760000077700607767000770077777066660006666770606677
66666666770007777777777600076706666600700066770000007707660000000000067777007770000767600777707606776667770007600000666700670670
00077676777776766677777770066606077776060007000006077776660000077700660777076700067666000777776777606667700006670006776700077707
00076076706766000077777077666000007760666666000077707006667007767700067077776000776660007777766777006677006676777666677760667000
67076666000666000077776676667000070666660600700677700006700066667770007700760006766600677660067670066600000660076666770666667000
66777760000606006667606660777777006666600007067777600060707666766670777776000006766606776600676666066600000700766607700066660000
66677777066666666666060607077700666666000676776600006770776060066777777700077606066067777777076666677600767000066677700067700000
77777777776666666600000770667766666607066677776600667777760000000777067600776660000077760777766666776000070007666777760760000766
77777777766006600000007700667770077770006666660000770777767000007770666077776666600077770777760067767000760070777767000000000666
66006666060000777000077766667770700000066666000007777776677700706606667770770066666766000076666667660060000707607776660000006666
60007700000000000000677766600777770600006060000077770766600077677060007707600066666660000776006677067767000777077000007700076666
66767777060000066000067606077770706660000600060077606666600677600670777776660066676606607000066760007760070677000000777700766000
77777777776666600667007007000706066600000060067000066770077677070707776666667066766066666606667600077760006666000007767007666707
66767770066667000077777700006660766777060000006006666077776670777777766666666666660066666666660000777700006667700607777076666777
06666600006077707777600666666667767777666070000060666706777700677777766666666666000667666666600000777060006777066777777666660777
00660000000006006006666666600677666766666600000667767666670006667077760707666670000666066066600000777666066770000777776666677777
06060000000666666667666666777777766666660006666777777066707066667007667776666777666660000666000006667066000770000777006666700076
77666777766666666660706777070067067760000666667777767676000776666066077766666670666600000666006660077006000600007677707667770666
77767777666666667677777777000066677770666666667766667706000777060007700066666600666000007660066600077066607060776607006667766666
66676600066777777777706776000666607606066676666606676066607770070000767060666666666006006007666600606670670677776000000767776677
00000660770776677770666666000606776666677666606667766666677760077007666006666666660006000006606776666667676677767600007777760677
06000000000066667706666666076670006660066606006667777666607007777776660006666667660060600006000776666677767777670076660777766777
66670706666666666666770666766777766606600000000666777666000777766766660076666677700606777000007776660077666776060766700706677777
06667766666667770767777066666776666660000060707766677760007777776666677666666077666667770000677066600007607070000777776770077770
06666000000077077777760006666777760606066777777660677770077777766667006666000006666606706000077666777000006670007667766607670600
00667777770777007776666666666770066667777776070066007777767770000670000660000066606000066677706667777000076600066670066677700006
00000076600076606766666666660700066677777760700077006776777700000707706666000666600006666077766667770000706000666777766667700066
60600666666666066666066660600060666777777007770707766676677700000007770067766666000066607077006007766077000070666077607667700006
77066006666606770006776700000666676066700666777767766777077777707007770777666607000000677700000776066076000777660006677776706077
00600000000000776076666060666606777007006667777666777777707777000007777770766077706000777000007070777767000776667006667776666676
00007007777006706606666606676000770777777666777667770777777770000007777066607707666007770600770707777600000667777760677760066660
00000000000066666666006607777700006667777766606677700077777700070777776666777770666670707677770000777770076666077607777700066600
06060660600666660600000000070006666677767606676770707667777000007777666667777066066066670777766077767700666660076077777000676600
76666666000000000000006700607766676666066676777777000666077000077777660007706660000766607777666667770000666706666667777706777700
66607660000000077770606066667777666000606777777777000770000777700070000000706667707770077770666666700770060066666677700766667006
06000666677060000776666666766676000076667776766676707007000767000000707700000077777770007706666770007000000076667777000067600006
60000060000666666766666666607700007777770776666677760707706777700077777006600777767777776666667770007700700766677777000666000066
66070006606666667606606606000000007777770066666777077776667777776777770000000007670777776067677770707777007066777070677660000666
76777066066666077000000000607677077767700066677700777766770000777777006007770000000777766677670077767777766666060000776660007760
66660000066660000000000006767677776760006666707000777776660007776770707000700066000077006667000007667777766677666006766670607000
06000000066600070060600707776667607770667667077000077076666607777077777000000766700000006677000076777767766677760767766707076000
00000700666666766677060000766600000777777677776670770006666667770776707706007766600007076670007766600766606770666777660777760000
00076766676767776666666000000000776777777667666677700076666607700667000006677776000677777000777076777766670700066776600077077606
70777770666666766600000600000777777077666666666777707767766600006666700000677770066767770007760000777677700070077766006770007766
66676700666606000000006660000677770007666666077007766677776000006666760007667700066677707076666000767777000607777660077770007766
00660000066666000000007670007766600000666677077766667777077670666607777777777000766670077766660777667700006667777667777700077700
00000000060666676607070777676666060777767077767666600706776660770000776767707077076700077760607776667770666667776077777700777600
06770077777776777667007770000666666777777766666676700706666666000007766677077660007000777770006766670766066660006667767006777000
07777777770676606600000766066666667777776666666770007766666660000067666600066660007007677700666666677766666670006667666067777000
00770606606666000000000666677666777767666666070777766667666000066600006000666660007777677006666670777666766760006666666777607067
00000006000066006666007767777767666666666677000677766677700077666000007770666000006667707776666700076666777666076666066770000077
00000000000666666666777777777677000666776070006667676777007006667600077700777000006667007777667700766667776666677600066676006677

